{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="fw-semibold text-danger">Post Details</h3>
    <a href="{{ url_for('admin.forum_posts') }}" class="btn btn-outline-secondary btn-sm">Back</a>
  </div>

  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h5 class="card-title">{{ post.title }}</h5>
      <p class="text-muted mb-2">By {{ post.user.name }} â€¢ {{ post.timestamp.strftime('%d %B %Y, %I:%M %p') }}</p>
      <p class="card-text">{{ post.content }}</p>
      <form method="POST" onsubmit="return confirm('Are you sure you want to delete this post?');">
        <input type="hidden" name="action" value="delete_post">
        <button type="submit" class="btn btn-danger btn-sm mt-2">Delete Post</button>
      </form>
    </div>
  </div>

  <h5 class="fw-semibold mb-3">Comments</h5>
  {% if comments %}
    <ul class="list-group">
      {% for comment in comments %}
        <li class="list-group-item d-flex justify-content-between align-items-start">
          <div>
            <strong>{{ comment.user.name }}</strong>
            <small class="text-muted ms-2">{{ comment.timestamp.strftime('%d %b %Y, %I:%M %p') }}</small>
            <p class="mb-1">{{ comment.content }}</p>
          </div>
          <form method="POST" onsubmit="return confirm('Delete this comment?');">
            <input type="hidden" name="action" value="delete_comment_{{ comment.commentID }}">
            <button type="submit" class="btn btn-outline-danger btn-sm">Delete</button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="alert alert-info text-center">No comments on this post.</div>
  {% endif %}
</div>
{% endblock %}
