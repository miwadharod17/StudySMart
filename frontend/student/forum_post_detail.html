{% extends "student/dashboard.html" %}
{% set active_page = 'forum' %}

{% block dashboard_content %}
<div class="card mb-4 shadow-sm">
  <div class="card-body">
    <h4 class="card-title">{{ post.title }}</h4>
    <p class="card-text text-muted">by {{ post.user.name if post.user else 'Anonymous' }} • {{ post.timestamp.strftime('%d %b %Y, %I:%M %p') }}</p>
  </div>
</div>

<h5 class="fw-semibold mb-3">Comments</h5>
{% for comment in post.comments %}
<div class="card mb-2">
  <div class="card-body">
    <p>{{ comment.content }}</p>
    <p class="text-muted small mb-0">— {{ comment.user.name if comment.user else 'Anonymous' }}, {{ comment.timestamp.strftime('%d %b %Y, %I:%M %p') }}</p>
  </div>
</div>
{% else %}
<div class="alert alert-light border">No comments yet. Be the first to reply!</div>
{% endfor %}

<!-- Add Comment -->
<form method="POST" action="{{ url_for('student.add_comment', post_id=post.postID) }}" class="mt-4">
  <div class="mb-3">
    <label class="form-label">Add a Comment</label>
    <textarea name="content" class="form-control" rows="2" required></textarea>
  </div>
  <button class="btn btn-success">Submit Comment</button>
</form>
{% endblock %}
